### ============================================
### PERFORMANCE TESTS
### ============================================
### Tests for performance, load, and stress scenarios
### Note: For proper load testing, use tools like k6, JMeter, or Artillery
### These are basic sequential tests for performance validation
###
### HOW TO VIEW RESPONSE TIME:
### 1. Click "Send Request" above any test
### 2. Response panel will show "Response time: XXXms" at the top
### 3. Check VS Code status bar (bottom) for timing info
### 4. Compare times against benchmarks at the end of this file
### ============================================

### Variables
@baseUrl = http://localhost:5000/api/v1
@contentType = application/json
@email = test.signup@example.com
@password = SecurePass123!@#
@fullName = Nguyen Van Test User
@gender = male
@birthday = 1995-06-15
@language = en
# @language = vi

### ============================================
### RESPONSE TIME VALIDATION
### ============================================

### Test 1: Send OTP Response Time (Should be < 1s)
# @name perfSendOtp1
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "perf.test.1@example.com"
}

###

### Test 2: Verify OTP Response Time (Should be < 500ms)
POST {{baseUrl}}/auth/signup/verify-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "perf.test.1@example.com",
  "otp": "395910"
}

###

### ============================================
### SEQUENTIAL RAPID REQUESTS
### ============================================
### Test the system with multiple rapid sequential requests

### Rapid Request 1
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "rapid.1@example.com"
}

###

### Rapid Request 2
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "rapid.2@example.com"
}

###

### Rapid Request 3
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "rapid.3@example.com"
}

###

### Rapid Request 4
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "rapid.4@example.com"
}

###

### Rapid Request 5
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "rapid.5@example.com"
}

###

### ============================================
### RESEND OTP PERFORMANCE
### ============================================
### Test Resend OTP Multiple Times (Same Email)
### Note: May be rate-limited if cooldown is active

### Resend 1
POST {{baseUrl}}/auth/signup/resend-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "resend.test@example.com"
}

###

### Resend 2 (Should succeed or be rate limited)
POST {{baseUrl}}/auth/signup/resend-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "resend.test@example.com"
}

###

### Resend 3
POST {{baseUrl}}/auth/signup/resend-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "resend.test@example.com"
}

###

### ============================================
### LARGE PAYLOAD TESTS
### ============================================

### Complete Signup with Maximum Data Size
# @name perfLargePayload
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "large.payload@example.com"
}

### Verify
# @name perfLargePayloadVerify
POST {{baseUrl}}/auth/signup/verify-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "large.payload@example.com",
  "otp": "361974"
}

### Complete with Max Length Fields
POST {{baseUrl}}/auth/signup/complete
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "large.payload@example.com",
  "password": "VeryLongPasswordWithSpecialCharacters!@#$%^&*()1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
  "sessionId": "{{perfLargePayloadVerify.response.body.data.sessionId}}",
  "acceptTerms": true,
  "fullName": "This Is A Very Long Full Name With Exactly One Hundred Characters To Test The Maximum Length Limit OK",
  "gender": "other",
  "birthday": "1990-01-01"
}

###

### ============================================
### CONCURRENT USER SIMULATION
### ============================================
### Note: HTTP files run sequentially. For true concurrent testing, use k6 or JMeter
### These tests simulate different users signing up one after another

### User 1
# @name user1SendOtp
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "concurrent.user.1@example.com"
}

###

### User 2
# @name user2SendOtp
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "concurrent.user.2@example.com"
}

###

### User 3
# @name user3SendOtp
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "concurrent.user.3@example.com"
}

###

### User 4
# @name user4SendOtp
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "concurrent.user.4@example.com"
}

###

### User 5
# @name user5SendOtp
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "concurrent.user.5@example.com"
}

###

### ============================================
### LANGUAGE SWITCHING PERFORMANCE
### ============================================
### Test performance in selected language

### Request 1
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "lang.test.1@example.com"
}

###

### Request 2
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "lang.test.2@example.com"
}

###

### Request 3
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "lang.test.3@example.com"
}

###

### Request 4
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "lang.test.4@example.com"
}

###

### ============================================
### PERFORMANCE BENCHMARKS - SO S√ÅNH K·∫æT QU·∫¢
### ============================================
### Sau khi ch·∫°y c√°c test, so s√°nh response time v·ªõi ti√™u chu·∫©n d∆∞·ªõi ƒë√¢y:
###
### üìä SEND OTP:
###   ‚úÖ T·ªët:        < 1000ms (1 gi√¢y)
###   ‚ö†Ô∏è  Ch·∫•p nh·∫≠n:  1000-2000ms (1-2 gi√¢y)
###   ‚ùå K√©m:        > 2000ms (>2 gi√¢y)
###
### üìä VERIFY OTP:
###   ‚úÖ T·ªët:        < 500ms
###   ‚ö†Ô∏è  Ch·∫•p nh·∫≠n:  500-1000ms
###   ‚ùå K√©m:        > 1000ms
###
### üìä COMPLETE SIGNUP:
###   ‚úÖ T·ªët:        < 1500ms
###   ‚ö†Ô∏è  Ch·∫•p nh·∫≠n:  1500-3000ms
###   ‚ùå K√©m:        > 3000ms
###
### üìä RESEND OTP:
###   ‚úÖ T·ªët:        < 1000ms
###   ‚ö†Ô∏è  Ch·∫•p nh·∫≠n:  1000-2000ms
###   ‚ùå K√©m:        > 2000ms
###
### üîí RATE LIMITING (n·∫øu ƒë∆∞·ª£c b·∫≠t):
###   - Khi b·ªã rate limit: tr·∫£ v·ªÅ status 429
###   - Response ph·∫£i c√≥ header "retry-after"
###   - Response time: < 100ms (reject nhanh)
###
### ‚ö° COMPONENT BENCHMARKS:
###   - Redis operations: < 50ms
###   - Database email check: < 200ms
###   - Database user creation: < 500ms
###   - Email sending: < 2000ms
###
### üí° L∆ØU √ù:
###   - Response time c√≥ th·ªÉ ch·∫≠m h∆°n ·ªü l·∫ßn ƒë·∫ßu (cold start)
###   - Ch·∫°y l·∫°i test 2-3 l·∫ßn ƒë·ªÉ c√≥ k·∫øt qu·∫£ ch√≠nh x√°c h∆°n
###   - Network latency ·∫£nh h∆∞·ªüng ƒë·∫øn k·∫øt qu·∫£
### ============================================

### ============================================
### LOAD TESTING RECOMMENDATIONS
### ============================================
### For proper load testing, use:
###
### 1. k6 (https://k6.io/)
###    - Scenario: 100 VUs for 5 minutes
###    - Check: p95 < 1000ms, error rate < 1%
###
### 2. Apache JMeter
###    - Thread Group: 50-100 threads
###    - Ramp-up: 30 seconds
###    - Duration: 5 minutes
###
### 3. Artillery (https://artillery.io/)
###    - Phases: warm-up, ramp-up, sustained load
###    - Check: p95, p99 latencies
###
### Example k6 script location:
###   /tests/load/signup-load-test.js
### ============================================
