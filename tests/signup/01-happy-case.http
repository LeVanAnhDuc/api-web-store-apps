### ============================================
### HAPPY CASE - COMPLETE SIGNUP FLOW
### ============================================
### Tests the successful signup flow from start to finish
### Covers: EN and VI languages
### ============================================

### Variables
@baseUrl = http://localhost:5000/api/v1
@contentType = application/json
@email = test.signup@example.com
@password = SecurePass123!@#
@fullName = Nguyen Van Test User
@gender = male
@birthday = 1995-06-15
# @language = en
@language = vi

### ============================================
### COMPLETE SIGNUP FLOW
### ============================================

### Step 1: Send OTP
# @name sendOtp
POST {{baseUrl}}/auth/signup/send-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "{{email}}"
}

###

### Step 2: Verify OTP (Replace with actual OTP from email)
# @name verifyOtp
POST {{baseUrl}}/auth/signup/verify-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "{{email}}",
  "otp": "621992"
}

###

### Step 3: Complete Signup
# @name completeSignup
POST {{baseUrl}}/auth/signup/complete
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "{{email}}",
  "password": "{{password}}",
  "sessionId": "{{verifyOtp.response.body.data.sessionId}}",
  "acceptTerms": true,
  "fullName": "{{fullName}}",
  "gender": "{{gender}}",
  "birthday": "{{birthday}}"
}

###

### ============================================
### RESEND OTP FLOW
### ============================================

### Resend OTP
POST {{baseUrl}}/auth/signup/resend-otp
Content-Type: {{contentType}}
Accept-Language: {{language}}

{
  "email": "{{email}}"
}

###

### ============================================
### SUCCESS CRITERIA
### ============================================
### Step 1 Response: 200 OK
###   - success: true
###   - expiresIn: 600
###
### Step 2 Response: 200 OK
###   - success: true
###   - sessionId: string
###   - expiresIn: 600
###
### Step 3 Response: 200 OK
###   - success: true
###   - accessToken: string (JWT)
###   - refreshToken: string (JWT)
###   - idToken: string (JWT)
###   - expiresIn: number
### ============================================
